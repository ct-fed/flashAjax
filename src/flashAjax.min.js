(function(n){var a=n.flashAjax;if(a){return}a=function(n){var a=t.createGuid();d(a,n);p(a)};var t={createGuid:function(){return"_"+Math.random().toString(36).slice(2)},isFunction:function(n){return Object.prototype.toString.call(n)==="[object Function]"}};var e={url:"",type:"GET",dataType:"",data:{},flashUrl:"",onReady:function(){},onSuccess:function(){},onFail:function(){},onComplete:function(){}};var o;var r=function(a){if(o){return}o=t.createGuid();var e=t.createGuid();n("body").prepend('<div style="position: absolute;top:-100px;left:0;"><div id="'+e+'"/></div>');swfobject.embedSWF(v(a).flashUrl+"?"+(new Date).getTime(),e,"1","1","9.0.0","expressInstall.swf",{connectName:"$.flashAjax.onConnect"},{allowFullscreen:"true",allowScriptAccess:"always"},{id:o,name:o})};var i=function(){return document.getElementById(o)};var u=false;var c=[];var l=function(){n.each(c,function(n,a){f(a,v(a).onReady)});c=[]};var f=function(n,a){if(t.isFunction(a)&&a()===false){return}y(n)};a.onConnect=function(){u=true;i().asParam("$.flashAjax.onSuccess","$.flashAjax.onFail","$.flashAjax.onComplete");l()};a.onSuccess=function(n,a){v(a).onSuccess(n)};a.onFail=function(n,a){v(a).onFail(n.msg)};a.onComplete=function(n){v(n).onComplete()};var s={};var d=function(a,t){s[a]=n.extend(e,t)};var v=function(n){return s[n]};var p=function(n){var a=v(n);if(!a.url){a.onFail("请配置接口地址");return}if(!a.flashUrl){a.onFail("请配置swf文件地址");return}if(u){f(n,a.onReady);return}c.push(n);r(n)};var y=function(n){var a=v(n);i().asSend({url:a.url,data:a.data,type:a.type,dataType:a.dataType,maskId:n})};n.flashAjax=a})(jQuery);